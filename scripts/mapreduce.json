{"type":"program","value":[{"type":"func","value":{"name":{"type":"ident","value":"map_iter"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"arr"},{"type":"ident","value":"accumulated"},{"type":"ident","value":"fn"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"conditional","value":{"cond":{"type":"infix","value":{"left":{"type":"call","value":{"args":[{"type":"ident","value":"arr"}],"func":{"type":"builtin","value":"len"}}},"op":"==","right":{"type":"integer","value":0}}},"no":{"type":"call","value":{"args":[{"type":"callmember","value":{"args":[],"func":{"type":"ident","value":"tail"},"left":{"type":"ident","value":"arr"}}},{"type":"callmember","value":{"args":[{"type":"call","value":{"args":[{"type":"callmember","value":{"args":[],"func":{"type":"ident","value":"first"},"left":{"type":"ident","value":"arr"}}}],"func":{"type":"ident","value":"fn"}}}],"func":{"type":"ident","value":"push"},"left":{"type":"ident","value":"accumulated"}}},{"type":"ident","value":"fn"}],"func":{"type":"ident","value":"map_iter"}}},"yes":{"type":"ident","value":"accumulated"}}}}]},"name":"map_iter"}}}},{"type":"func","value":{"name":{"type":"ident","value":"map"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"arr"},{"type":"ident","value":"fn"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"call","value":{"args":[{"type":"ident","value":"arr"},{"type":"array","value":[]},{"type":"ident","value":"fn"}],"func":{"type":"ident","value":"map_iter"}}}}]},"name":"map"}}}},{"type":"func","value":{"name":{"type":"ident","value":"double"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"x"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"infix","value":{"left":{"type":"ident","value":"x"},"op":"*","right":{"type":"integer","value":2}}}}]},"name":"double"}}}},{"type":"func","value":{"name":{"type":"ident","value":"reduce"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"arr"},{"type":"ident","value":"result"},{"type":"ident","value":"fn"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"conditional","value":{"cond":{"type":"infix","value":{"left":{"type":"call","value":{"args":[{"type":"ident","value":"arr"}],"func":{"type":"builtin","value":"len"}}},"op":"==","right":{"type":"integer","value":0}}},"no":{"type":"call","value":{"args":[{"type":"callmember","value":{"args":[],"func":{"type":"ident","value":"tail"},"left":{"type":"ident","value":"arr"}}},{"type":"call","value":{"args":[{"type":"ident","value":"result"},{"type":"callmember","value":{"args":[],"func":{"type":"ident","value":"first"},"left":{"type":"ident","value":"arr"}}}],"func":{"type":"ident","value":"fn"}}},{"type":"ident","value":"fn"}],"func":{"type":"ident","value":"reduce"}}},"yes":{"type":"ident","value":"result"}}}}]},"name":"reduce"}}}},{"type":"func","value":{"name":{"type":"ident","value":"add"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"x"},{"type":"ident","value":"y"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"infix","value":{"left":{"type":"ident","value":"x"},"op":"+","right":{"type":"ident","value":"y"}}}}]},"name":"add"}}}},{"type":"func","value":{"name":{"type":"ident","value":"sum"},"value":{"type":"fn","value":{"args":[{"type":"ident","value":"arr"}],"body":{"type":"block","value":[{"type":"return","value":{"type":"call","value":{"args":[{"type":"ident","value":"arr"},{"type":"integer","value":0},{"type":"ident","value":"add"}],"func":{"type":"ident","value":"reduce"}}}}]},"name":"sum"}}}},{"type":"func","value":{"name":{"type":"ident","value":"main"},"value":{"type":"fn","value":{"args":[],"body":{"type":"block","value":[{"type":"var","value":{"name":{"type":"ident","value":"a"},"value":{"type":"array","value":[{"type":"integer","value":1},{"type":"integer","value":2},{"type":"integer","value":3},{"type":"integer","value":4},{"type":"integer","value":5}]}}},{"type":"var","value":{"name":{"type":"ident","value":"result"},"value":{"type":"call","value":{"args":[{"type":"ident","value":"a"},{"type":"ident","value":"double"}],"func":{"type":"ident","value":"map"}}}}},{"type":"expr","value":{"type":"call","value":{"args":[{"type":"ident","value":"result"}],"func":{"type":"builtin","value":"println"}}}},{"type":"var","value":{"name":{"type":"ident","value":"rc"},"value":{"type":"call","value":{"args":[{"type":"array","value":[{"type":"integer","value":1},{"type":"integer","value":2},{"type":"integer","value":3},{"type":"integer","value":4},{"type":"integer","value":5}]}],"func":{"type":"ident","value":"sum"}}}}},{"type":"expr","value":{"type":"call","value":{"args":[{"type":"ident","value":"rc"}],"func":{"type":"builtin","value":"println"}}}}]},"name":"main"}}}},{"type":"expr","value":{"type":"call","value":{"args":[],"func":{"type":"ident","value":"main"}}}}]}
